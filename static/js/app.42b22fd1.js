/*Obfuscated by JShaman.com*/(function(_0x27f9e0){function _0x3d2579(_0x399b43){for(var _0x30f9c4,_0x589b87,_0x40e623=_0x399b43[0x0],_0x38d322=_0x399b43[0x1],_0x31752a=_0x399b43[0x2],_0x47c40e=0x0,_0x3232a6=[];_0x47c40e<_0x40e623['length'];_0x47c40e++)_0x589b87=_0x40e623[_0x47c40e],Object['prototype']['hasOwnProperty']['call'](_0x1d2f86,_0x589b87)&&_0x1d2f86[_0x589b87]&&_0x3232a6['push'](_0x1d2f86[_0x589b87][0x0]),_0x1d2f86[_0x589b87]=0x0;for(_0x30f9c4 in _0x38d322)Object['prototype']['hasOwnProperty']['call'](_0x38d322,_0x30f9c4)&&(_0x27f9e0[_0x30f9c4]=_0x38d322[_0x30f9c4]);_0x4500ba&&_0x4500ba(_0x399b43);while(_0x3232a6['length'])_0x3232a6['shift']()();return _0x2f973e['push']['apply'](_0x2f973e,_0x31752a||[]),_0x3ed383();}function _0x3ed383(){for(var _0x2fc033,_0x465262=0x0;_0x465262<_0x2f973e['length'];_0x465262++){for(var _0x6b1a32=_0x2f973e[_0x465262],_0x3aa60e=!0x0,_0x1aa42e=0x1;_0x1aa42e<_0x6b1a32['length'];_0x1aa42e++){var _0x47ad5c=_0x6b1a32[_0x1aa42e];0x0!==_0x1d2f86[_0x47ad5c]&&(_0x3aa60e=!0x1);}_0x3aa60e&&(_0x2f973e['splice'](_0x465262--,0x1),_0x2fc033=_0x125383(_0x125383['s']=_0x6b1a32[0x0]));}return _0x2fc033;}var _0x3dab7d={},_0x1d2f86={'app':0x0},_0x2f973e=[];function _0x125383(_0x46bc2d){if(_0x3dab7d[_0x46bc2d])return _0x3dab7d[_0x46bc2d]['exports'];var _0x323953=_0x3dab7d[_0x46bc2d]={'i':_0x46bc2d,'l':!0x1,'exports':{}};return _0x27f9e0[_0x46bc2d]['call'](_0x323953['exports'],_0x323953,_0x323953['exports'],_0x125383),_0x323953['l']=!0x0,_0x323953['exports'];}_0x125383['m']=_0x27f9e0,_0x125383['c']=_0x3dab7d,_0x125383['d']=function(_0x1ce8ab,_0x17353e,_0x125187){_0x125383['o'](_0x1ce8ab,_0x17353e)||Object['defineProperty'](_0x1ce8ab,_0x17353e,{'enumerable':!0x0,'get':_0x125187});},_0x125383['r']=function(_0x4c378e){'undefined'!==typeof Symbol&&Symbol['toStringTag']&&Object['defineProperty'](_0x4c378e,Symbol['toStringTag'],{'value':'Module'}),Object['defineProperty'](_0x4c378e,'__esModule',{'value':!0x0});},_0x125383['t']=function(_0x4387f1,_0x45e0eb){if(0x1&_0x45e0eb&&(_0x4387f1=_0x125383(_0x4387f1)),0x8&_0x45e0eb)return _0x4387f1;if(0x4&_0x45e0eb&&'object'===typeof _0x4387f1&&_0x4387f1&&_0x4387f1['__esModule'])return _0x4387f1;var _0x5152f4=Object['create'](null);if(_0x125383['r'](_0x5152f4),Object['defineProperty'](_0x5152f4,'default',{'enumerable':!0x0,'value':_0x4387f1}),0x2&_0x45e0eb&&'string'!=typeof _0x4387f1)for(var _0x26f14d in _0x4387f1)_0x125383['d'](_0x5152f4,_0x26f14d,function(_0x21b982){return _0x4387f1[_0x21b982];}['bind'](null,_0x26f14d));return _0x5152f4;},_0x125383['n']=function(_0x407914){var _0x16bc6d=_0x407914&&_0x407914['__esModule']?function(){return _0x407914['default'];}:function(){return _0x407914;};return _0x125383['d'](_0x16bc6d,'a',_0x16bc6d),_0x16bc6d;},_0x125383['o']=function(_0x1243a3,_0x3105a2){return Object['prototype']['hasOwnProperty']['call'](_0x1243a3,_0x3105a2);},_0x125383['p']='/webgl_three_cesium/';var _0x244020=window['webpackJsonp']=window['webpackJsonp']||[],_0x196b14=_0x244020['push']['bind'](_0x244020);_0x244020['push']=_0x3d2579,_0x244020=_0x244020['slice']();for(var _0x55911f=0x0;_0x55911f<_0x244020['length'];_0x55911f++)_0x3d2579(_0x244020[_0x55911f]);var _0x4500ba=_0x196b14;_0x2f973e['push']([0x0,'chunk-vendors']),_0x3ed383();}({0x0:function(_0x213f71,_0x33b427,_0x2df4b3){_0x213f71['exports']=_0x2df4b3('56d7');},'56d7':function(_0x4fa46e,_0x462d15,_0x256e05){'use strict';_0x256e05['r'](_0x462d15);_0x256e05('e260'),_0x256e05('e6cf'),_0x256e05('cca6'),_0x256e05('a79d');var _0x5d6368=_0x256e05('7a23');function _0x22ea65(_0x7940da,_0x3883c4){var _0xe985f0=Object(_0x5d6368['t'])('router-view');return Object(_0x5d6368['n'])(),Object(_0x5d6368['c'])(_0xe985f0);}_0x256e05('57ed');var _0x219ee1=_0x256e05('6b0d'),_0x199376=_0x256e05['n'](_0x219ee1);const _0x204552={},_0x5c00bb=_0x199376()(_0x204552,[['render',_0x22ea65]]);var _0x4e1214=_0x5c00bb,_0x2f4708=_0x256e05('6c02'),_0x2cdfcd={'class':'home'};function _0x926be9(_0x288859,_0xd0865d,_0x1df37c,_0x1a941a,_0x666a1e,_0xce7502){return Object(_0x5d6368['n'])(),Object(_0x5d6368['d'])('div',_0x2cdfcd,[Object(_0x5d6368['e'])('div',{'onClick':_0xd0865d[0x0]||(_0xd0865d[0x0]=function(){return _0x1a941a['water']&&_0x1a941a['water']['apply'](_0x1a941a,arguments);})},'去水'),Object(_0x5d6368['e'])('div',{'onClick':_0xd0865d[0x1]||(_0xd0865d[0x1]=function(){return _0x1a941a['cloud']&&_0x1a941a['cloud']['apply'](_0x1a941a,arguments);})},'去云')]);}var _0x336680={'name':'Home','components':{},'setup':function(){Object(_0x2f4708['c'])();var _0xf5f70e=Object(_0x2f4708['d'])();function _0x3d3a3b(){_0xf5f70e['push']('/water');}function _0x46d52e(){_0xf5f70e['push']('/cloud');}return{'water':_0x3d3a3b,'cloud':_0x46d52e};}};const _0x49cc9b=_0x199376()(_0x336680,[['render',_0x926be9]]);var _0x1c178e=_0x49cc9b,_0x4c34e4=function(_0x33ad69){return Object(_0x5d6368['q'])('data-v-b755fbd6'),_0x33ad69=_0x33ad69(),Object(_0x5d6368['o'])(),_0x33ad69;},_0x3a17e8={'class':'waterRoot'},_0x4eeb43=_0x4c34e4(function(){return Object(_0x5d6368['e'])('div',{'id':'threeContainer'},null,-0x1);}),_0x52361d=[_0x4eeb43];function _0x378f6a(_0x52b95f,_0x337140,_0x461bea,_0x110009,_0x60567a,_0x1c3871){return Object(_0x5d6368['n'])(),Object(_0x5d6368['d'])('div',_0x3a17e8,_0x52361d);}_0x256e05('d81d');var _0x1ff19c=_0x256e05('5a89'),_0x342554=_0x256e05('4721'),_0x31cf13=_0x256e05('34ad'),_0x7af01d=_0x256e05('32d9'),_0x4bb4e8=_0x256e05('360d'),_0x749e55=_0x256e05('93e9'),_0x402e2a=(_0x256e05('31f6'),{'name':'Water','mounted':function(){var _0x4b4fa3=new _0x1ff19c['jb'](),_0x5987e3=new _0x1ff19c['jb'](),_0x150561=new _0x1ff19c['Z'](0x5a,window['innerWidth']/window['innerHeight'],0.1,0x3e8);_0x150561['rotation']['x']=Math['PI']/0x2,_0x150561['rotation']['y']=Math['PI'],_0x150561['rotation']['z']=Math['PI']/0x2,_0x150561['position']['x']=0xf,_0x150561['position']['y']=0xf;var _0x4dcaa1=new _0x1ff19c['m'](0xffffff,0x1);_0x4dcaa1['rotation']['x']=-Math['PI']/0x2,_0x4dcaa1['rotation']['y']=Math['PI']/0x4,_0x4dcaa1['rotation']['z']=Math['PI']/0x2,_0x4dcaa1['position']['x']=0xf,_0x4dcaa1['position']['y']=0xf,_0x4b4fa3['add'](_0x4dcaa1),_0x150561['updateProjectionMatrix']();new _0x1ff19c['f'](_0x150561);_0x4b4fa3['add'](_0x150561);var _0x100f88,_0x25cf6e,_0x474f83,_0x322512=_0x5c164a({'x':0x0,'y':0x0,'width':window['innerWidth'],'height':window['innerHeight']},{'near':0.01,'far':0x3e8});window['baseUrl']='';var _0x464323=document['getElementById']('threeContainer'),_0x3dcf5d=new _0x1ff19c['Z'](0x46,window['innerWidth']/window['innerHeight'],0.01,0x1f4);_0x3dcf5d['position']['z']=10.2,_0x3dcf5d['position']['y']=0.5,_0x4b4fa3['add'](_0x3dcf5d);var _0x48c423;new _0x1ff19c['ab'](0xa,0xa,0x1,0x1);new _0x31cf13['a']()['setPath'](window['baseUrl']+'/ground/')['load']('scene.gltf',function(_0x228ab3){var _0x3930b2=new _0x1ff19c['e']();_0x3930b2['copy'](_0x228ab3['scene']['children'][0x0]['children'][0x0]['children'][0x0]['geometry']);var _0x326384=_0x228ab3['scene']['children'][0x0]['children'][0x0]['children'][0x0]['material']['map'];_0x48c423=_0x16c6a2(_0x326384);var _0x313f1c=new _0x1ff19c['O'](_0x3930b2,_0x48c423);_0x313f1c['rotation']['x']=-Math['PI']/0x2,_0x313f1c['position']['y']=0x0,_0x5987e3['add'](_0x313f1c);});var _0x38210a=new _0x1ff19c['Eb']({'antialias':!0x0});_0x38210a['setSize'](window['innerWidth'],window['innerHeight']),_0x38210a['setAnimationLoop'](_0x59c36f),_0x474f83=new _0x749e55['a'](_0x4b4fa3,_0x3dcf5d),_0x100f88=new _0x7af01d['a'](_0x38210a),_0x100f88['addPass'](_0x474f83),_0x25cf6e=new _0x4bb4e8['a']({'glslVersion':_0x1ff19c['s'],'uniforms':{'tDiffuse':{'value':null},'tDepth':{'value':null},'cameraNear':{'value':_0x3dcf5d['near']},'cameraFar':{'value':_0x3dcf5d['far']},'tNormal':{'value':null},'groundDepth':{'value':null},'viewPortMatrixInverse':{'value':_0x322512},'projectionMatrixInverse':{'value':_0x3dcf5d['projectionMatrixInverse']},'cameraProjectionMatrix':{'value':_0x3dcf5d['projectionMatrix']},'u_resolution':{'value':new _0x1ff19c['zb'](window['innerWidth'],window['innerHeight'])},'groundTexture':{'value':null},'onlyShadow':{'value':null}},'vertexShader':'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20varying\x20vec2\x20vUv;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20varying\x20vec3\x20v_position;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20varying\x20mat4\x20v_mvMatrix;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20void\x20main()\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vUv\x20=\x20uv;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20v_mvMatrix\x20=\x20modelViewMatrix;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20gl_Position\x20=\x20projectionMatrix\x20*\x20modelViewMatrix\x20*\x20vec4(\x20position,\x201.0\x20);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}','fragmentShader':'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#include\x20<packing>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20varying\x20vec2\x20vUv;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20float\x20cameraNear;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20float\x20cameraFar;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20sampler2D\x20tDiffuse;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20sampler2D\x20tDepth;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20sampler2D\x20tNormal;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20sampler2D\x20groundDepth;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20mat4\x20viewPortMatrixInverse;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20mat4\x20projectionMatrixInverse;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20mat4\x20cameraProjectionMatrix;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20vec2\x20u_resolution;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20sampler2D\x20groundTexture;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20sampler2D\x20onlyShadow;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20readDepth(\x20sampler2D\x20depthSampler,\x20vec2\x20coord\x20)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20fragCoordZ\x20=\x20texture2D(\x20depthSampler,\x20coord\x20).x;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20viewZ\x20=\x20perspectiveDepthToViewZ(\x20fragCoordZ,\x20cameraNear,\x20cameraFar\x20);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20return\x20viewZToOrthographicDepth(\x20viewZ,\x20cameraNear,\x20cameraFar\x20);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20getViewNormal(\x20const\x20in\x20vec2\x20uv\x20)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20return\x20unpackRGBToNormal(\x20texture2D(\x20tNormal,\x20uv\x20).xyz\x20);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20getViewZ(\x20const\x20in\x20float\x20depth\x20)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20return\x20perspectiveDepthToViewZ(\x20depth,\x20cameraNear,\x20cameraFar\x20);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20getViewPosition(\x20const\x20in\x20vec2\x20uv,\x20const\x20in\x20float\x20depth/*clip\x20space*/,\x20const\x20in\x20float\x20clipW\x20)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20clipPosition\x20=\x20vec4(\x20(\x20vec3(\x20uv,\x20depth\x20)\x20-\x200.5\x20)\x20*\x202.0,\x201.0\x20);//ndc\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20clipPosition\x20*=\x20clipW;\x20//clip\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20return\x20(\x20projectionMatrixInverse\x20*\x20clipPosition\x20);//view\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20blur(in\x20sampler2D\x20tx,in\x20vec2\x20uv){\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20Pi\x20=\x206.28318530718;\x20//\x20Pi*2\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20GAUSSIAN\x20BLUR\x20SETTINGS\x20{{{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20Directions\x20=\x2016.0;\x20//\x20BLUR\x20DIRECTIONS\x20(Default\x2016.0\x20-\x20More\x20is\x20better\x20but\x20slower)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20Quality\x20=\x204.0;\x20//\x20BLUR\x20QUALITY\x20(Default\x204.0\x20-\x20More\x20is\x20better\x20but\x20slower)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20Size\x20=\x2010.0;\x20//\x20BLUR\x20SIZE\x20(Radius)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20GAUSSIAN\x20BLUR\x20SETTINGS\x20}}}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec2\x20Radius\x20=\x20Size/vec2(1440.,1440.);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20Pixel\x20colour\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20Color\x20=\x20texture(tx,\x20uv);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20Blur\x20calculations\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20for(\x20float\x20d=0.0;\x20d<Pi;\x20d+=Pi/Directions)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20for(float\x20i=1.0/Quality;\x20i<=1.0;\x20i+=1.0/Quality)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Color\x20+=\x20texture(\x20tx,\x20uv+vec2(cos(d),sin(d))*Radius*i);\x09\x09\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20Output\x20to\x20screen\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Color\x20/=\x20Quality\x20*\x20Directions\x20-\x2015.0;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20return\x20Color;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20void\x20main()\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20maxDistance\x20=\x203.;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20resolution\x20\x20=\x200.3;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20thickness\x20\x20\x20=\x20.15;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20baseColor\x20=\x20texture2D(groundTexture,vUv);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20olShadow\x20=\x20blur(onlyShadow,vUv);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if(olShadow.a>0.2){\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20baseColor.rgb\x20=\x20baseColor.rgb-olShadow.r*0.3;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20color\x20=\x20texture2D(tDiffuse,vUv);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20n\x20=\x20vec4(normalize(getViewNormal(vUv)),1.);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20depthMain\x20=\x20texture2D(tDepth,vUv).r;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20depthGround\x20=\x20texture2D(groundDepth,vUv).r;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec2\x20groundUv;//叠上贴图，需要把地板视图转为uv\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20(n.r!=0.\x20||n.g!=0.\x20||n.b!=0.)\x20&&\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20depthGround<depthMain){\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//先获取片元到视角向量(eyePos)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20viewZ\x20=\x20getViewZ(\x20depthGround\x20);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20clipW\x20=\x20cameraProjectionMatrix[2][3]\x20*\x20viewZ+cameraProjectionMatrix[3][3];\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20viewPosition=\x20getViewPosition(\x20vUv,\x20depthGround,\x20clipW\x20);\x20//地面视图空间坐标获取到了\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//为了算相机与地面夹角，从而用于透明度\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20upDirection\x20=\x20n.xyz;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20centerToEyeDirection\x20=\x20vec3(0.,0.,1.);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20cosValue\x20=\x201.-dot(upDirection,centerToEyeDirection);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//反射方向\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20reflectDir\x20=\x20normalize(reflect(viewPosition.xyz,n.xyz));\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//开始前进\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color\x20=\x20vec4(1.);//texture2D(tDiffuse,vec2(reflectDir.y,reflectDir.x));\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec2\x20texSize\x20\x20=\x20u_resolution;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec2\x20texCoord\x20=\x20gl_FragCoord.xy\x20/\x20texSize;\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20uv\x20=\x20vec4(0.0);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20startView\x20=\x20vec4(viewPosition.xyz\x20+\x20(reflectDir\x20*\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x200.),\x201.);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20endView\x20\x20\x20=\x20vec4(viewPosition.xyz\x20+\x20(reflectDir\x20*\x20maxDistance),\x201.);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20startFrag\x20=\x20\x20startView;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20startFrag\x20=\x20cameraProjectionMatrix\x20*\x20startView;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20startFrag.xyz/=startFrag.w;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20startFrag.xy\x20\x20=\x20startFrag.xy\x20\x20*\x200.5\x20+\x200.5;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20startFrag.xy\x20\x20*=\x20texSize;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20endFrag\x20=\x20\x20endView;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20endFrag\x20=\x20cameraProjectionMatrix\x20*\x20endView;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20endFrag.xyz/=endFrag.w;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20endFrag.xy\x20\x20=\x20endFrag.xy\x20*\x200.5\x20+\x200.5;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20endFrag.xy\x20\x20*=\x20texSize;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20positionTo\x20=\x20viewPosition;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec2\x20frag\x20=\x20startFrag.xy;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uv.xy\x20=\x20frag\x20/\x20texSize;\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20deltaX\x20\x20\x20\x20=\x20endFrag.x\x20-\x20startFrag.x;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20deltaY\x20\x20\x20\x20=\x20endFrag.y\x20-\x20startFrag.y;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20useX\x20\x20\x20\x20\x20\x20=\x20abs(deltaX)\x20>=\x20abs(deltaY)\x20?\x201.\x20:\x200.;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20delta\x20\x20\x20\x20\x20=\x20mix(abs(deltaY),\x20abs(deltaX),\x20useX)\x20*\x20clamp(resolution,\x200.,\x201.);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec2\x20\x20increment\x20=\x20vec2(deltaX,\x20deltaY)\x20/\x20max(delta,\x200.001);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//float\x20curPositionX;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//float\x20curPositionY;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20curPositionX\x20=\x20(startFrag.x)*(1.-search1)+(endFrag.x)*search1;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20curPositionY\x20=\x20(startFrag.y)*(1.-search1)+(endFrag.y)*search1;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20search0\x20=\x200.;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20search1\x20=\x200.;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20int\x20hit0\x20=\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20int\x20hit1\x20=\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20viewDistance\x20=\x20startView.z;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20depth\x20\x20\x20\x20\x20\x20\x20\x20=\x200.;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20i\x20=\x200.;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20stp\x20=\x20mix(increment.x,increment.y,useX);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20for(i=0.;i<delta;i+=stp){\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20if(delta>5000.){\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20\x20\x20\x20\x20gl_FragColor\x20=\x20baseColor;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20\x20\x20\x20\x20return;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20frag\x20\x20\x20\x20\x20\x20+=\x20increment;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uv.xy\x20\x20\x20\x20\x20\x20=\x20frag\x20/\x20texSize;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if(uv.x>1.\x20||\x20uv.y>1.\x20||\x20uv.x<0.\x20||\x20uv.y<0.){\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20break;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20dd\x20=\x20texture2D(tDepth,uv.xy).r;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20viewZZ\x20=\x20getViewZ(\x20dd\x20);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20clipWW\x20=\x20cameraProjectionMatrix[2][3]\x20*\x20viewZZ+cameraProjectionMatrix[3][3];\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20positionTo\x20=\x20vec4(\x20getViewPosition(\x20uv.xy,\x20dd,\x20clipWW\x20).xyz,1.);\x20//地面视图空间坐标获取到了\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20search1\x20=\x20mix\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20(\x20(frag.y\x20-\x20startFrag.y)\x20/\x20deltaY\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20,\x20(frag.x\x20-\x20startFrag.x)\x20/\x20deltaX\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20,\x20useX\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20search1\x20=\x20clamp(search1,\x200.0,\x201.0);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20viewDistance\x20=\x20(startView.z\x20*\x20endView.z)\x20/\x20mix(endView.z,\x20startView.z,\x20search1);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20depth\x20\x20\x20\x20\x20\x20\x20\x20=\x20abs(positionTo.z)-abs(viewDistance);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20wtfD\x20=\x20abs(viewDistance)-abs(positionTo.z);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20depth>wtfD\x20&&\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20depth\x20<\x20thickness\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20&&\x20dd!=1.\x20)\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20hit0\x20=\x201;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20break;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if(hit0>0){\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color\x20=\x20texture2D(tDiffuse,uv.xy);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color\x20=\x20mix(baseColor,color,cosValue);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//可以在这里模糊化反射\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}else{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color\x20=\x20baseColor;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20gl_FragColor\x20=\x20color;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}'}),_0x100f88['addPass'](_0x25cf6e);new _0x342554['a'](_0x3dcf5d,_0x38210a['domElement']);_0x464323['appendChild'](_0x38210a['domElement']);var _0x58339a=_0x7a10d8(),_0x3c91fa=_0x28dc31(),_0x56d68f=_0x56aca2();function _0x59c36f(_0x1ec2c3){_0x150561['position']['x']=0x8*Math['sin'](0.005*_0x1ec2c3),_0x150561['position']['z']=0x8*Math['cos'](0.001*_0x1ec2c3),_0x4dcaa1['position']['x']=0x8*Math['sin'](0.005*_0x1ec2c3),_0x4dcaa1['position']['z']=0x8*Math['cos'](0.001*_0x1ec2c3),_0x100f88['renderer']['setRenderTarget'](_0x58339a),_0x100f88['renderer']['render'](_0x4b4fa3,_0x3dcf5d),_0x25cf6e['uniforms']['tDepth']['value']=_0x58339a['depthTexture'],_0x100f88['renderer']['setRenderTarget'](_0x56d68f),_0x100f88['renderer']['render'](_0x4b4fa3,_0x150561),_0x48c423&&(_0x48c423['uniforms']['depthTextureFromLightCamera']['value']=_0x56d68f['depthTexture']),_0x100f88['renderer']['setRenderTarget'](_0x3c91fa),_0x100f88['renderer']['render'](_0x5987e3,_0x3dcf5d),_0x25cf6e['uniforms']['tNormal']['value']=_0x3c91fa['texture'][0x1],_0x25cf6e['uniforms']['groundTexture']['value']=_0x3c91fa['texture'][0x0],_0x25cf6e['uniforms']['onlyShadow']['value']=_0x3c91fa['texture'][0x2],_0x25cf6e['uniforms']['groundDepth']['value']=_0x3c91fa['depthTexture'],_0x100f88['renderer']['setRenderTarget'](null),_0x100f88['render']();}function _0x7a10d8(){var _0x1fed28=new _0x1ff19c['Db'](window['innerWidth'],window['innerHeight']);return _0x1fed28['texture']['minFilter']=_0x1ff19c['T'],_0x1fed28['texture']['magFilter']=_0x1ff19c['T'],_0x1fed28['stencilBuffer']=_0x1ff19c['j']===_0x1ff19c['k'],_0x1fed28['depthTexture']=new _0x1ff19c['l'](),_0x1fed28['depthTexture']['format']=_0x1ff19c['j'],_0x1fed28['depthTexture']['type']=_0x1ff19c['yb'],_0x1fed28['setSize'](window['innerWidth'],window['innerHeight']),_0x1fed28;}function _0x28dc31(){var _0x6d7a1e=new _0x1ff19c['Cb'](window['innerWidth']*window['devicePixelRatio'],window['innerHeight']*window['devicePixelRatio'],0x3);return _0x6d7a1e['stencilBuffer']=_0x1ff19c['j']===_0x1ff19c['k'],_0x6d7a1e['depthTexture']=new _0x1ff19c['l'](),_0x6d7a1e['depthTexture']['format']=_0x1ff19c['j'],_0x6d7a1e['depthTexture']['type']=_0x1ff19c['yb'],_0x6d7a1e['setSize'](window['innerWidth'],window['innerHeight']),_0x6d7a1e;}function _0x56aca2(){var _0x2abf5a=new _0x1ff19c['Db'](window['innerWidth'],window['innerHeight']);return _0x2abf5a['texture']['minFilter']=_0x1ff19c['T'],_0x2abf5a['texture']['magFilter']=_0x1ff19c['T'],_0x2abf5a['stencilBuffer']=_0x1ff19c['j']===_0x1ff19c['k'],_0x2abf5a['depthTexture']=new _0x1ff19c['l'](),_0x2abf5a['depthTexture']['format']=_0x1ff19c['j'],_0x2abf5a['depthTexture']['type']=_0x1ff19c['yb'],_0x2abf5a['setSize'](window['innerWidth'],window['innerHeight']),_0x2abf5a;}function _0x5c164a(_0x577cec,_0xa69670){var _0x2be4e4=new _0x1ff19c['N'](),_0x1ee330=new _0x1ff19c['N']();return _0x2be4e4['set'](_0x577cec['width']/0x2,0x0,0x0,_0x577cec['x']+_0x577cec['width']/0x2,0x0,_0x577cec['height']/0x2,0x0,_0x577cec['y']+_0x577cec['height']/0x2,0x0,0x0,(_0xa69670['far']-_0xa69670['near'])/0x2,(_0xa69670['far']+_0xa69670['near'])/0x2,0x0,0x0,0x0,0x1),_0x1ee330['getInverse'](_0x2be4e4,!0x0),_0x1ee330;}function _0x17ac5f(){_0x3dcf5d['aspect']=window['innerWidth']/window['innerHeight'],_0x3dcf5d['updateProjectionMatrix'](),_0x150561['aspect']=window['innerWidth']/window['innerHeight'],_0x150561['updateProjectionMatrix'](),_0x100f88['renderer']['setSize'](window['innerWidth'],window['innerHeight']);_0x100f88['renderer']['getPixelRatio']();_0x3c91fa['setSize'](window['innerWidth'],window['innerHeight']),_0x58339a['setSize'](window['innerWidth'],window['innerHeight']);}function _0x16c6a2(_0x24528e){var _0x112b02=new _0x1ff19c['kb']({'glslVersion':_0x1ff19c['s'],'uniforms':{'gTexture':{'value':_0x24528e},'u_vMatrixFromLight':{'value':_0x150561['matrixWorldInverse']},'u_ProjectionMatrixFromLight':{'value':_0x150561['projectionMatrix']},'depthTextureFromLightCamera':{'value':null}},'vertexShader':'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20varying\x20vec2\x20vUv;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20varying\x20vec3\x20v_normal;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20varying\x20vec4\x20result;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20mat4\x20u_vMatrixFromLight;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20mat4\x20u_ProjectionMatrixFromLight;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20varying\x20vec4\x20v_posFromLight;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20void\x20main()\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vUv\x20=\x20uv;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20v_normal\x20=\x20normalMatrix\x20*\x20normalize(normal);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20v_posFromLight\x20=\x20u_ProjectionMatrixFromLight\x20*\x20u_vMatrixFromLight\x20*\x20modelMatrix\x20*\x20vec4(\x20position,\x201.0\x20);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20gl_Position\x20=\x20projectionMatrix\x20*\x20modelViewMatrix\x20*\x20vec4(\x20position,\x201.0\x20);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}','fragmentShader':'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#include\x20<packing>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20varying\x20vec2\x20vUv;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20varying\x20vec3\x20v_normal;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20sampler2D\x20gTexture;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20layout(location\x20=\x200)\x20out\x20vec4\x20gColor;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20layout(location\x20=\x201)\x20out\x20vec4\x20gNormal;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20layout(location\x20=\x202)\x20out\x20vec4\x20onlyShadow;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20varying\x20vec4\x20v_posFromLight;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20sampler2D\x20depthTextureFromLightCamera;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20blur(in\x20sampler2D\x20tx,in\x20vec2\x20uv){\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20Pi\x20=\x206.28318530718;\x20//\x20Pi*2\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20GAUSSIAN\x20BLUR\x20SETTINGS\x20{{{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20Directions\x20=\x2016.0;\x20//\x20BLUR\x20DIRECTIONS\x20(Default\x2016.0\x20-\x20More\x20is\x20better\x20but\x20slower)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20Quality\x20=\x203.0;\x20//\x20BLUR\x20QUALITY\x20(Default\x204.0\x20-\x20More\x20is\x20better\x20but\x20slower)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20Size\x20=\x208.0;\x20//\x20BLUR\x20SIZE\x20(Radius)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20GAUSSIAN\x20BLUR\x20SETTINGS\x20}}}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec2\x20Radius\x20=\x20Size/vec2(1920.,1920.);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20Pixel\x20colour\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20Color\x20=\x20texture(tx,\x20uv);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20Blur\x20calculations\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20for(\x20float\x20d=0.0;\x20d<Pi;\x20d+=Pi/Directions)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20for(float\x20i=1.0/Quality;\x20i<=1.0;\x20i+=1.0/Quality)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Color\x20+=\x20texture(\x20tx,\x20uv+vec2(cos(d),sin(d))*Radius*i);\x09\x09\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20Output\x20to\x20screen\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Color\x20/=\x20Quality\x20*\x20Directions\x20-\x2015.0;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20return\x20Color.r;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20void\x20main()\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec2\x20uv\x20=\x20vUv;\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20n\x20=\x20v_normal;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20nv_color\x20=\x20n*0.5\x20\x20+\x200.5;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20final2\x20=\x20vec4(nv_color,1.);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20gNormal\x20=\x20final2;\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20shadowCoord\x20=\x20(v_posFromLight.xyz/v_posFromLight.w)/2.0\x20+\x200.5;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20depth\x20=\x20texture2D(depthTextureFromLightCamera,\x20shadowCoord.xy).r;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20float\x20depth\x20=\x20blur(depthTextureFromLightCamera,\x20shadowCoord.xy);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20visibility\x20=\x20(shadowCoord.z\x20>\x20depth)\x20?\x201.\x20:\x20.0;\x20//\x20判断片元是否在阴影中\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20finalColor\x20=\x20texture2D(gTexture,uv);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20sd;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if(visibility==1.){\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20sd\x20=\x20vec4(1.,1.,1.,1.);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}else{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20sd\x20=\x20vec4(0.,0.,0.,0.);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20gColor\x20\x20=\x20finalColor;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onlyShadow\x20=\x20sd;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}'});return _0x112b02;}new _0x31cf13['a']()['setPath'](window['baseUrl']+'/girl/')['load']('scene.gltf',function(_0xda4fc8){_0x4b4fa3['add'](_0xda4fc8['scene']),_0xda4fc8['scene']['scale']['x']=0.01,_0xda4fc8['scene']['scale']['y']=0.01,_0xda4fc8['scene']['scale']['z']=0.01,_0xda4fc8['scene']['position']['y']=0.04;}),window['onresize']=_0x17ac5f;}});_0x256e05('8f0b');const _0x5f0a92=_0x199376()(_0x402e2a,[['render',_0x378f6a],['__scopeId','data-v-b755fbd6']]);var _0x314521=_0x5f0a92,_0xc356c5=function(_0x32f700){return Object(_0x5d6368['q'])('data-v-540e18f6'),_0x32f700=_0x32f700(),Object(_0x5d6368['o'])(),_0x32f700;},_0x22a709={'class':'waterRoot'},_0x28dc5f=_0xc356c5(function(){return Object(_0x5d6368['e'])('div',{'id':'threeContainer'},null,-0x1);}),_0x32ab57=[_0x28dc5f];function _0x4307b7(_0x36d4e9,_0x3cbed9,_0x59e3ad,_0x402280,_0x4a602,_0x5aaaae){return Object(_0x5d6368['n'])(),Object(_0x5d6368['d'])('div',_0x22a709,_0x32ab57);}var _0x5d1a6d={'name':'Water','mounted':function(){var _0x3db5f5=new _0x1ff19c['jb'](),_0x140ad9=new _0x1ff19c['Z'](0x5a,window['innerWidth']/window['innerHeight'],0x5,0x3e8);_0x140ad9['position']['y']=0x7,_0x140ad9['rotation']['x']=-Math['PI']/0x2,_0x140ad9['updateProjectionMatrix']();var _0x4a4419=new _0x1ff19c['f'](_0x140ad9);_0x3db5f5['add'](_0x4a4419),_0x3db5f5['add'](_0x140ad9),window['baseUrl']='';var _0x33e238,_0x26b8f0,_0x2a701b,_0x34ac8b=document['getElementById']('threeContainer'),_0x37e604=new _0x1ff19c['Z'](0x46,window['innerWidth']/window['innerHeight'],0.01,0x1f4);_0x37e604['position']['z']=10.2,_0x37e604['position']['y']=0.5,_0x3db5f5['add'](_0x37e604);var _0x2f277a=new _0x1ff19c['ab'](0xa,0xa,0x1,0x1),_0x5dbc59=new _0x1ff19c['kb']({'glslVersion':_0x1ff19c['s'],'uniforms':{'u_vMatrixFromLight':{'value':_0x140ad9['matrixWorldInverse']},'u_ProjectionMatrixFromLight':{'value':_0x140ad9['projectionMatrix']},'depthTextureFromLightCamera':{'value':null}},'vertexShader':'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20varying\x20vec2\x20vUv;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20mat4\x20u_vMatrixFromLight;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20mat4\x20u_ProjectionMatrixFromLight;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20varying\x20vec4\x20v_posFromLight;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20void\x20main()\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vUv\x20=\x20uv;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20v_posFromLight\x20=\x20u_ProjectionMatrixFromLight\x20*\x20u_vMatrixFromLight\x20*\x20modelMatrix\x20*\x20vec4(\x20position,\x201.0\x20);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20gl_Position\x20=\x20projectionMatrix\x20*\x20modelViewMatrix\x20*\x20vec4(\x20position,\x201.0\x20);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}','fragmentShader':'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#include\x20<packing>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20varying\x20vec2\x20vUv;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20layout(location\x20=\x200)\x20out\x20vec4\x20gColor;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20varying\x20vec4\x20v_posFromLight;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20sampler2D\x20depthTextureFromLightCamera;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20void\x20main()\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec2\x20uv\x20=\x20vUv;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20shadowCoord\x20=\x20(v_posFromLight.xyz/v_posFromLight.w)/2.0\x20+\x200.5;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20depth\x20=\x20texture2D(depthTextureFromLightCamera,\x20shadowCoord.xy).r;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20visibility\x20=\x20(shadowCoord.z\x20>\x20depth)\x20?\x201.\x20:\x20.0;\x20//\x20判断片元是否在阴影中\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20gColor\x20\x20=\x20vec4(depth,0.,0.,1.);//vec4(vec3(1.-visibility),1.);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}'}),_0x3d6d3b=new _0x1ff19c['O'](_0x2f277a,_0x5dbc59);_0x3d6d3b['rotation']['x']=-Math['PI']/0x2,_0x3d6d3b['updateMatrix'](),_0x3db5f5['add'](_0x3d6d3b);var _0x4149cb=new _0x1ff19c['Eb']({'antialias':!0x0});_0x4149cb['setSize'](window['innerWidth'],window['innerHeight']),_0x4149cb['setAnimationLoop'](_0x2a64e9),_0x2a701b=new _0x749e55['a'](_0x3db5f5,_0x37e604),_0x33e238=new _0x7af01d['a'](_0x4149cb),_0x33e238['addPass'](_0x2a701b),_0x26b8f0=new _0x4bb4e8['a']({'glslVersion':_0x1ff19c['s'],'uniforms':{'tDiffuse':{'value':null},'tDepth':{'value':null},'cameraNear':{'value':_0x37e604['near']},'cameraFar':{'value':_0x37e604['far']},'projectionMatrixInverse':{'value':_0x37e604['projectionMatrixInverse']},'cameraProjectionMatrix':{'value':_0x37e604['projectionMatrix']},'u_resolution':{'value':new _0x1ff19c['zb'](window['innerWidth'],window['innerHeight'])}},'vertexShader':'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20varying\x20vec2\x20vUv;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20varying\x20vec3\x20v_position;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20varying\x20mat4\x20v_mvMatrix;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20void\x20main()\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vUv\x20=\x20uv;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20v_mvMatrix\x20=\x20modelViewMatrix;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20gl_Position\x20=\x20projectionMatrix\x20*\x20modelViewMatrix\x20*\x20vec4(\x20position,\x201.0\x20);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}','fragmentShader':'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#include\x20<packing>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20varying\x20vec2\x20vUv;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20float\x20cameraNear;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20float\x20cameraFar;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20sampler2D\x20tDiffuse;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20sampler2D\x20tDepth;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20mat4\x20projectionMatrixInverse;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20mat4\x20cameraProjectionMatrix;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20vec2\x20u_resolution;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20void\x20main()\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20color\x20=\x20texture2D(tDiffuse,vUv);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20gl_FragColor\x20=\x20color;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}'}),_0x33e238['addPass'](_0x26b8f0);var _0x16c32a=new _0x1ff19c['m'](0xffffff,0x1);_0x16c32a['castShadow']=!0x0,_0x16c32a['rotation']['x']=Math['PI']/0x2,_0x16c32a['rotation']['z']=Math['PI']/0x2,_0x16c32a['position']['x']=0x32,_0x16c32a['position']['y']=0xa,_0x3db5f5['add'](_0x16c32a);new _0x342554['a'](_0x37e604,_0x4149cb['domElement']);_0x34ac8b['appendChild'](_0x4149cb['domElement']);var _0xab1357=_0x3e816f();function _0x2a64e9(_0x39e248){_0x140ad9['position']['x']=0x2*Math['sin'](0.001*_0x39e248),_0x140ad9['position']['z']=0x2*Math['cos'](0.001*_0x39e248),_0x33e238['renderer']['setRenderTarget'](_0xab1357),_0x33e238['renderer']['render'](_0x3db5f5,_0x140ad9),_0x5dbc59['uniforms']['depthTextureFromLightCamera']['value']=_0xab1357['depthTexture'],_0x33e238['renderer']['setRenderTarget'](null),_0x33e238['renderer']['render'](_0x3db5f5,_0x37e604);}function _0x3e816f(){var _0x1878d1=new _0x1ff19c['Db'](window['innerWidth'],window['innerHeight']);return _0x1878d1['texture']['minFilter']=_0x1ff19c['T'],_0x1878d1['texture']['magFilter']=_0x1ff19c['T'],_0x1878d1['stencilBuffer']=_0x1ff19c['j']===_0x1ff19c['k'],_0x1878d1['depthTexture']=new _0x1ff19c['l'](),_0x1878d1['depthTexture']['format']=_0x1ff19c['j'],_0x1878d1['depthTexture']['type']=_0x1ff19c['yb'],_0x1878d1['setSize'](window['innerWidth'],window['innerHeight']),_0x1878d1;}function _0x2b72bc(){_0x37e604['aspect']=window['innerWidth']/window['innerHeight'],_0x37e604['updateProjectionMatrix'](),_0x140ad9['aspect']=window['innerWidth']/window['innerHeight'],_0x140ad9['updateProjectionMatrix'](),_0x33e238['renderer']['setSize'](window['innerWidth'],window['innerHeight']);}new _0x31cf13['a']()['setPath'](window['baseUrl']+'/car/')['load']('scene.gltf',function(_0x2274b4){_0x3db5f5['add'](_0x2274b4['scene']),_0x2274b4['scene']['scale']['x']=0.01,_0x2274b4['scene']['scale']['y']=0.01,_0x2274b4['scene']['scale']['z']=0.01,_0x2274b4['scene']['position']['y']=0x0;}),window['onresize']=_0x2b72bc;}};_0x256e05('9f5f');const _0x1019c9=_0x199376()(_0x5d1a6d,[['render',_0x4307b7],['__scopeId','data-v-540e18f6']]);var _0x47f123=_0x1019c9,_0x3cf51e=function(_0x3ba382){return Object(_0x5d6368['q'])('data-v-7c740dcd'),_0x3ba382=_0x3ba382(),Object(_0x5d6368['o'])(),_0x3ba382;},_0x39f98d={'class':'cloudRoot'},_0x2060f9=_0x3cf51e(function(){return Object(_0x5d6368['e'])('div',{'id':'threeContainer'},null,-0x1);}),_0xcbbbaf=[_0x2060f9];function _0x5a8378(_0x60ab50,_0xa86d83,_0x252c0a,_0x3bdcae,_0x35091a,_0x1172d3){return Object(_0x5d6368['n'])(),Object(_0x5d6368['d'])('div',_0x39f98d,_0xcbbbaf);}_0x256e05('38cf'),_0x256e05('ae0e');var _0x1a560f={'name':'Cloud','mounted':function(){window['baseUrl']='';var _0x1e9d20=new _0x1ff19c['ub']()['load'](window['baseUrl']+'noise/perlin.png',function(_0x18a292){_0x1e9d20['wrapS']=_0x1ff19c['ib'],_0x1e9d20['wrapT']=_0x1ff19c['ib'],_0x1e9d20['repeat']['set'](0xa,0xa);var _0x40a6fc=new _0x1ff19c['jb']();window['camera']=new _0x1ff19c['Z'](0x46,window['innerWidth']/window['innerHeight'],0.01,0x249f0),camera['position']['z']=-0xa,_0x40a6fc['add'](camera);var _0x123425=new _0x1ff19c['Eb']({'antialias':!0x0});_0x123425['setSize'](window['innerWidth'],window['innerHeight']),_0x123425['setAnimationLoop'](_0x14994b);new _0x342554['a'](camera,_0x123425['domElement']);var _0x3b7a55=document['getElementById']('threeContainer');_0x3b7a55['appendChild'](_0x123425['domElement']),_0x40a6fc['background']=new _0x1ff19c['i'](0x5577aa);var _0x4448a9={'position':new _0x1ff19c['Ab'](0x0,0xc350,0x2710)},_0xdd1eb8=new _0x1ff19c['ob'](0x64,0x20,0x10),_0x2078e4=new _0x1ff19c['P']({'color':0xffffdd});window['lightHelp']=new _0x1ff19c['O'](_0xdd1eb8,_0x2078e4),lightHelp['position']['y']=0xc350,lightHelp['position']['z']=0x2710,_0x40a6fc['add'](lightHelp);var _0x169660=_0x4c4dad(camera,_0x4448a9);function _0x1fc306(){camera['aspect']=window['innerWidth']/window['innerHeight'],camera['updateProjectionMatrix'](),_0x123425['setSize'](window['innerWidth'],window['innerHeight']);}function _0x14994b(_0x5be693){_0x169660&&(_0x169660['material']['uniforms']['time']['value']=_0x5be693),_0x123425['setRenderTarget'](null),_0x123425['render'](_0x40a6fc,camera);}_0x40a6fc['add'](_0x169660),window['onresize']=_0x1fc306;});function _0x4c4dad(_0x196d3c,_0x37a6d5){var _0x3cd232=new _0x1ff19c['ab'](0x2710,0x2710),_0x25d3e6=new _0x1ff19c['kb']({'glslVersion':_0x1ff19c['s'],'transparent':!0x0,'side':_0x1ff19c['n'],'uniforms':{'cameraPos':{'value':_0x196d3c['position']},'projectionMatrixInverse':{'value':_0x196d3c['projectionMatrixInverse']},'cameraProjectionMatrix':{'value':_0x196d3c['projectionMatrix']},'matrixWorld':{'value':_0x196d3c['matrixWorld']},'perlinTexture':{'value':_0x1e9d20},'time':{'value':0x0},'centerHeight':{'value':0x5a},'lightPos':{'value':_0x37a6d5['position']},'lightDirLength':{'value':0x19},'lightPow':{'value':1.5}},'vertexShader':'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20varying\x20vec4\x20v_position;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20varying\x20vec4\x20v_eyePosition;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20varying\x20vec4\x20v_pjPosition;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20varying\x20mat4\x20projection;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20varying\x20mat4\x20view;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20varying\x20vec3\x20cameraEyePos;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20void\x20main(){\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20v_position\x20=\x20modelMatrix\x20*\x20vec4(\x20position,\x201.0\x20);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20v_eyePosition\x20=\x20modelViewMatrix\x20*\x20vec4(\x20position,\x201.0\x20);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20v_pjPosition\x20=\x20projectionMatrix\x20*\x20v_eyePosition;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20projection\x20=\x20projectionMatrix;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20view\x20=\x20viewMatrix;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20gl_Position\x20=\x20projectionMatrix\x20*\x20modelViewMatrix\x20*\x20vec4(\x20position,\x201.0\x20);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','fragmentShader':'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#include\x20<packing>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20precision\x20highp\x20sampler3D;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20bottom\x20=\x20300.0;\x20\x20\x20//\x20云层底部\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20top\x20=\x20700.0;\x20\x20\x20\x20\x20\x20//\x20云层顶部\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20width\x20=\x205000.0;\x20\x20\x20\x20//\x20云层\x20xz\x20坐标范围\x20[-width,\x20width]\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20layout(location\x20=\x200)\x20out\x20vec4\x20gColor;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20varying\x20vec4\x20v_position;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20varying\x20vec4\x20v_eyePosition;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20varying\x20vec4\x20v_pjPosition;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20vec3\x20cameraPos;\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20mat4\x20projectionMatrixInverse;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20mat4\x20cameraProjectionMatrix;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20mat4\x20matrixWorld;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20sampler2D\x20perlinTexture;\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20varying\x20mat4\x20projection;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20varying\x20mat4\x20view;\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#define\x20baseBright\x20\x20vec3(1.4,1.4,1.5)\x20\x20\x20\x20//\x20基础颜色\x20--\x20亮部\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#define\x20baseDark\x20\x20\x20\x20vec3(0.21,0.21,0.21)\x20\x20\x20\x20//\x20基础颜色\x20--\x20暗部\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#define\x20lightBright\x20vec3(1.5,\x201.5,\x201.7)\x20\x20//\x20光照颜色\x20--\x20亮部\x201.29,\x201.17,\x201.05\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20#define\x20lightDark\x20\x20\x20vec3(0.2,0.25,0.27)\x20\x20\x20\x20\x20\x20//\x20光照颜色\x20--\x20暗部\x200.7,0.75,0.8\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20uniform\x20sampler2D\x20depthMain;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20float\x20time;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20vec3\x20lightPos;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20float\x20lightDirLength;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20float\x20lightPow;\x20//灯光亮度\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//3D噪声\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20noise(vec3\x20x)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20p\x20=\x20floor(x);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20f\x20=\x20fract(x);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20f\x20=\x20smoothstep(0.0,\x201.0,\x20f);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec2\x20uv\x20=\x20(p.xy+vec2(37.0,\x2017.0)*p.z)\x20+\x20f.xy;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20v1\x20=\x20texture2D(\x20perlinTexture,\x20(uv)/256.0,\x20-100.0\x20).x;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20v2\x20=\x20texture2D(\x20perlinTexture,\x20(uv\x20+\x20vec2(37.0,\x2017.0))/256.0,\x20-100.0\x20).x;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20return\x20mix(v1,\x20v2,\x20f.z);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20getCloudNoise(vec3\x20worldPos)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20coord\x20=\x20worldPos;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20coord.x\x20+=\x20time*0.0005;//移动\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20coord.z\x20+=\x20time*0.0005;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20coord.y\x20-=\x20time*0.0008;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20coord\x20*=\x200.2;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20n\x20=\x20noise(coord)\x20*\x200.5;\x20\x20\x20coord\x20*=\x203.0;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20n\x20+=\x20noise(coord)\x20*\x200.25;\x20\x20coord\x20*=\x203.01;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20n\x20+=\x20noise(coord)\x20*\x200.125;\x20coord\x20*=\x203.02;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20n\x20+=\x20noise(coord)\x20*\x200.0625;\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20return\x20max(n\x20-\x200.5,\x200.0)\x20*\x20(1.0\x20/\x20(1.0\x20-\x200.5));\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20getDensity(vec3\x20pos)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20p\x20=\x20pos;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20p.z\x20*=\x200.5;\x20//防止纹理变形，调整为正方形\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20p.xz*=0.025;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20p.y\x20*=\x200.025;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20noise\x20=\x20getCloudNoise(p);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20return\x20noise;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20random\x20(vec2\x20st)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20return\x20fract(sin(dot(st.xy,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec2(12.9898,78.233)))*\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2043758.5453123);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20getCloud(vec3\x20worldPos){\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20direction\x20=\x20normalize(worldPos.xyz\x20-\x20cameraPos);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20step\x20=\x20direction\x20*\x2010.\x20+\x20random(worldPos.xz)*0.05\x20;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20colorSum\x20=\x20vec4(0);\x20\x20\x20\x20\x20\x20\x20\x20//\x20积累的颜色\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20point;\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20从相机出发开始测试\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//优化，把起点移动到当前片元云的坐标\x20gl_FragCoord.z深度求出eye坐标再转为世界坐标\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20wPos\x20=\x20\x20matrixWorld\x20*\x20v_eyePosition;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20point\x20=\x20wPos.xyz;//cameraPos;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20x_\x20=\x20length(v_eyePosition);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20int\x20loop\x20=\x20int((\x20\x200.00100*\x20(x_)\x20\x20*\x20exp(1.-\x200.00100*(x_))\x20\x20)*100.);\x20//400次循环\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20mat4\x20pvMatrix\x20=\x20projection\x20*\x20view;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20cloudThick\x20=\x20(x_+400.);//云层厚度400\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20for(int\x20i=0;\x20i<\x20loop;\x20i++)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20point\x20+=\x20step;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if(length(point-cameraPos)>\x20cloudThick\x20){\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20break;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20if(bottom>point.y\x20||\x20point.y>top\x20||\x20-width>point.x\x20||\x20point.x>width\x20||\x20-width>point.z\x20||\x20point.z>width)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20\x20\x20\x20\x20break;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20转屏幕坐标\x20无效代码\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20vec4\x20screenPos\x20=\x20pvMatrix\x20*\x20vec4(point,\x201.0);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20screenPos\x20/=\x20screenPos.w;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20screenPos.xyz\x20=\x20screenPos.xyz\x20*\x200.5\x20+\x200.5;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20float\x20sampleDepth\x20=\x20texture2D(depthMain,\x20screenPos.xy).r;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20float\x20testDepth\x20=\x20screenPos.z;\x20\x20//\x20测试深度\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20if(sampleDepth<testDepth)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20\x20\x20\x20\x20break;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20density\x20=\x20getDensity(point)\x20;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20L\x20=\x20normalize(lightPos\x20-\x20point)*lightDirLength;\x20//\x20光源方向\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20lightDensity\x20=\x20getDensity(point\x20+\x20L);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20for(int\x20j=0;j<1;j++){\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20L\x20+=\x20normalize(lightPos\x20-\x20point)*lightDirLength;\x20//\x20光源方向\x20\x20迭代次数越多，越精准\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20lightDensity\x20+=\x20getDensity(point\x20+\x20L);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20delta\x20=\x20clamp(density\x20-\x20lightDensity,0.0,\x201.0);\x20\x20\x20\x20\x20\x20//\x20两次采样密度差\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20base\x20=\x20baseBright*\x20density;\x20//mix(\x20baseBright,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//baseDark,\x20//\x20不累积暗部颜色，下面采用了自阴影代替累积颜色\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//density)\x20*\x20density;\x20\x20\x20//\x20基础颜色\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20light\x20=\x20mix(lightDark,\x20lightBright,\x20delta)\x20*\x20lightPow;\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20光照对颜色影响\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20border\x20=\x200.025;\x20//黑边，\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20color\x20=\x20vec4(base\x20*light\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20,density-border);\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20当前点的最终颜色\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20colorSum\x20=\x20color\x20*\x20(1.0\x20-\x20colorSum.a)\x20+\x20colorSum;\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20与累积的颜色混合\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20return\x20colorSum;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20void\x20main(){\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20cloud\x20=\x20getCloud(v_position.xyz);\x20//\x20云颜色\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20fColor;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20fColor.rgb\x20=\x20cloud.rgb;\x20\x20\x20\x20//\x20混色\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20fColor.a\x20=\x20cloud.a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20gColor\x20=\x20fColor;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'}),_0x3a4aeb=new _0x1ff19c['O'](_0x3cd232,_0x25d3e6),_0x2a755a=0x1f4;return _0x3a4aeb['position']['y']=_0x2a755a,_0x3a4aeb['rotation']['x']=Math['PI']/0x2,_0x3a4aeb;}}};_0x256e05('9f34');const _0x22cc19=_0x199376()(_0x1a560f,[['render',_0x5a8378],['__scopeId','data-v-7c740dcd']]);var _0x328fa8=_0x22cc19,_0x2b4a4c=[{'path':'/','name':'Home','component':_0x1c178e},{'path':'/water','name':'Water','component':_0x314521},{'path':'/shadow','name':'Shadow','component':_0x47f123},{'path':'/cloud','name':'Cloud','component':_0x328fa8}],_0x4396f1=Object(_0x2f4708['a'])({'history':Object(_0x2f4708['b'])(),'routes':_0x2b4a4c}),_0x2ca26d=_0x4396f1;Object(_0x5d6368['b'])(_0x4e1214)['use'](_0x2ca26d)['mount']('#app');},'57ed':function(_0x336ab7,_0x51f49e,_0x3fd70c){'use strict';_0x3fd70c('7de0');},'634f':function(_0x45e3b0,_0x582eb4,_0x1f1579){},'7de0':function(_0x420754,_0x5d6123,_0x3250d8){},'8f0b':function(_0x91200c,_0x1ae91a,_0x513810){'use strict';_0x513810('d04b');},'9f34':function(_0x303c39,_0x52ab2d,_0x4e1fe4){'use strict';_0x4e1fe4('634f');},'9f5f':function(_0x3098ff,_0x5256d8,_0x2294b6){'use strict';_0x2294b6('b0d5');},'b0d5':function(_0x3fb6fa,_0x2f28e4,_0x36b0b0){},'d04b':function(_0x2b2a07,_0x450724,_0x10ea44){}}));